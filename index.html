<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebRTC Video Chat</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé• WebRTC Video Chat</h1>
            <p class="subtitle">Peer-to-peer video calling in your browser</p>
        </div>

        <!-- Join Screen -->
        <div id="joinScreen" class="screen">
            <div class="card">
                <h2>Join a Video Call</h2>
                <div class="form-group">
                    <label for="username">Your Name:</label>
                    <input type="text" id="username" placeholder="Enter your name" value="User">
                </div>
                <div class="form-group">
                    <label for="roomId">Room ID:</label>
                    <div class="input-with-button">
                        <input type="text" id="roomId" placeholder="Enter room ID">
                        <button onclick="generateRoomId()" class="btn-secondary">Generate</button>
                    </div>
                </div>
                <button onclick="joinRoom()" class="btn-primary">Join Room</button>
                
                <div class="room-list" id="roomList">
                    <h3>Active Rooms</h3>
                    <div id="roomsContainer">Loading rooms...</div>
                </div>
            </div>
        </div>

        <!-- Call Screen -->
        <div id="callScreen" class="screen" style="display: none;">
            <div class="call-header">
                <div class="room-info">
                    <h2>Room: <span id="currentRoomName"></span></h2>
                    <p>Users: <span id="userCount">1</span></p>
                </div>
                <button onclick="leaveRoom()" class="btn-danger">Leave Room</button>
            </div>

            <div class="call-container">
                <!-- Video Grid -->
                <div class="video-grid" id="videoGrid">
                    <!-- Local video will be added here -->
                </div>

                <!-- Chat Panel -->
                <div class="chat-panel">
                    <div class="chat-header">
                        <h3>Chat</h3>
                        <div class="connection-status" id="connectionStatus">
                            <span class="status-indicator"></span>
                            Connected
                        </div>
                    </div>
                    <div class="chat-messages" id="chatMessages">
                        <div class="system-message">
                            Welcome to the chat! Messages are end-to-end encrypted.
                        </div>
                    </div>
                    <div class="chat-input">
                        <input type="text" id="messageInput" placeholder="Type a message...">
                        <button onclick="sendMessage()" class="btn-send">Send</button>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls">
                <button onclick="toggleVideo()" class="btn-control" id="videoToggle">
                    <span class="icon">üìπ</span> Video On
                </button>
                <button onclick="toggleAudio()" class="btn-control" id="audioToggle">
                    <span class="icon">üé§</span> Mic On
                </button>
                <button onclick="shareScreen()" class="btn-control" id="screenShare">
                    <span class="icon">üñ•Ô∏è</span> Share Screen
                </button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>